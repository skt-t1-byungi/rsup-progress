const t={DISAPPEAR:0,NOTHING:1,APPEAR:2,PENDING:3,DISAPPEAR_RESTART:4};function e(t,e){for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}function i(t){t.parentNode&&t.parentNode.removeChild(t)}window.progress=new class{constructor(e={}){this._el=document.createElement("div"),this._state=t.NOTHING,this._opts={maxWidth:"99.8%",height:"4px",duration:6e4,hideDuration:400,zIndex:"9999",color:"#ff1a59",className:"",timing:"cubic-bezier(0,1,0,1)",position:"top",container:document.body},this._rafId=null,this._timerId=null,this._promises=[],this._delayTimers=[],this.setOptions(e)}setOptions(t){let i=e(this._opts,t);isNaN(i.maxWidth)||(i.maxWidth+="px"),isNaN(i.height)||(i.height+="px"),i.zIndex=String(i.zIndex),this._el.className=i.className,this._css(e({height:i.height,background:i.color,zIndex:i.zIndex,position:"",left:"",top:"",bottom:""},{top:{position:"fixed",top:"0",left:"0"},bottom:{position:"fixed",bottom:"0",left:"0"}}[i.position]))}_css(t){e(this._el.style,t)}get isInProgress(){return 0!==this._state}start(){switch(this._state){case t.APPEAR:case t.PENDING:case t.DISAPPEAR_RESTART:return;case t.DISAPPEAR:this._state=t.DISAPPEAR_RESTART;return}this._state=t.APPEAR;let e=this._opts,i=`width ${e.duration}ms ${e.timing}`;this._css({width:"0",opacity:"1",transition:i,webkitTransition:i}),e.container.appendChild(this._el),this._rafId=requestAnimationFrame(()=>{this._rafId=requestAnimationFrame(()=>{this._rafId=null,this._state=t.PENDING,this._css({width:this._opts.maxWidth})})})}end(e=!1){switch(this._promises=[],this._delayTimers.splice(0).forEach(clearTimeout),this._state){case t.NOTHING:return;case t.APPEAR:this._state=t.NOTHING,cancelAnimationFrame(this._rafId),this._rafId=null,i(this._el);return;case t.DISAPPEAR:case t.DISAPPEAR_RESTART:e?(this._state=t.NOTHING,clearTimeout(this._timerId),this._timerId=null,i(this._el)):this._state=t.DISAPPEAR;return}if(e){this._state=t.NOTHING,i(this._el);return}this._state=t.DISAPPEAR;let s=this._opts,n=`width 50ms, opacity ${s.hideDuration}ms 150ms`;this._css({width:"100%",opacity:"0",transition:n,webkitTransition:n}),this._timerId=setTimeout(()=>{this._timerId=null;let e=this._state===t.DISAPPEAR_RESTART;this._state=t.NOTHING,i(this._el),e&&this.start()},s.hideDuration+150)}promise(t,{delay:e=0,min:i=100,waitAnimation:s=!1}={}){let n;let r=()=>{i>0&&(t=Promise.all([t,new Promise(t=>setTimeout(t,i))]).then(([t])=>t)),this._promises.push(t),this.start()},o=()=>{let t=this._delayTimers;t.splice(t.indexOf(n)>>>0,1),n=null};e>0?this._delayTimers.push(n=setTimeout(()=>{o(),r()},e)):r();let a=()=>{if(n){clearTimeout(n),o();return}let e=this._promises,i=e.indexOf(t);~i&&(e.splice(i,1),0===e.length&&this.end())},h=t.then(t=>(a(),t),t=>(a(),Promise.reject(t)));return s?h.then(t=>new Promise(e=>{this._el.addEventListener("transitionend",function i(){requestAnimationFrame(()=>requestAnimationFrame(()=>e(t))),this.removeEventListener("transitionend",i)},{once:!0})})):h}}({height:5}),window.delay=t=>new Promise(e=>setTimeout(e,t));//# sourceMappingURL=index.bf141b58.js.map

//# sourceMappingURL=index.bf141b58.js.map
