const t={DISAPPEAR:0,NOTHING:1,APPEAR:2,PENDING:3,DISAPPEAR_RESTART:4};function i(t,i){for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e]);return t}function e(t){t.parentNode&&t.parentNode.removeChild(t)}window.progress=new class{constructor(i={}){this._el=document.createElement("div"),this._state=t.NOTHING,this._opts={maxWidth:"99.8%",height:"4px",duration:6e4,hideDuration:400,zIndex:"9999",color:"#ff1a59",className:"",timing:"cubic-bezier(0,1,0,1)",position:"top",container:document.body},this._rafId=null,this._timerId=null,this._promises=[],this._delayTimers=[],this.setOptions(i)}setOptions(t){let e=i(this._opts,t);isNaN(e.maxWidth)||(e.maxWidth+="px"),isNaN(e.height)||(e.height+="px"),e.zIndex=String(e.zIndex),this._el.className=e.className,this._css(i({height:e.height,background:e.color,zIndex:e.zIndex,position:"",left:"",top:"",bottom:""},{top:{position:"fixed",top:"0",left:"0"},bottom:{position:"fixed",bottom:"0",left:"0"}}[e.position]))}_css(t){i(this._el.style,t)}get isInProgress(){return 0!==this._state}start(){switch(this._state){case t.APPEAR:case t.PENDING:case t.DISAPPEAR_RESTART:return;case t.DISAPPEAR:this._state=t.DISAPPEAR_RESTART;return}this._state=t.APPEAR;let i=this._opts,e=`width ${i.duration}ms ${i.timing}`;this._css({width:"0",opacity:"1",transition:e,webkitTransition:e}),i.container.appendChild(this._el),this._rafId=requestAnimationFrame(()=>{this._rafId=requestAnimationFrame(()=>{this._rafId=null,this._state=t.PENDING,this._css({width:this._opts.maxWidth})})})}end(i=!1){switch(this._promises=[],this._delayTimers.splice(0).forEach(clearTimeout),this._state){case t.NOTHING:return;case t.APPEAR:this._state=t.NOTHING,cancelAnimationFrame(this._rafId),this._rafId=null,e(this._el);return;case t.DISAPPEAR:case t.DISAPPEAR_RESTART:i?(this._state=t.NOTHING,clearTimeout(this._timerId),this._timerId=null,e(this._el)):this._state=t.DISAPPEAR;return}if(i){this._state=t.NOTHING,e(this._el);return}this._state=t.DISAPPEAR;let s=this._opts,n=`width 50ms, opacity ${s.hideDuration}ms 150ms`;this._css({width:"100%",opacity:"0",transition:n,webkitTransition:n}),this._timerId=setTimeout(()=>{this._timerId=null;let i=this._state===t.DISAPPEAR_RESTART;this._state=t.NOTHING,e(this._el),i&&this.start()},s.hideDuration+150)}promise(t,{delay:i=0,min:e=100,waitAnimation:s=!1}={}){let n;let r=()=>{e>0&&(t=Promise.all([t,new Promise(t=>setTimeout(t,e))]).then(([t])=>t)),this._promises.push(t),this.start()},h=()=>{let t=this._delayTimers;t.splice(t.indexOf(n)>>>0,1),n=null};i>0?this._delayTimers.push(n=setTimeout(()=>{h(),r()},i)):r();let o=()=>{if(n){clearTimeout(n),h();return}let i=this._promises,e=i.indexOf(t);~e&&(i.splice(e,1),0===i.length&&this.end())};return(t=t.then(t=>(o(),t),t=>(o(),Promise.reject(t))),s)?t.then(t=>new Promise(i=>{this._el.addEventListener("transitionend",function e(){i(t),this.removeEventListener("transitionend",e)},{once:!0})})):t}}({height:5}),window.delay=t=>new Promise(i=>setTimeout(i,t));//# sourceMappingURL=index.c769046f.js.map

//# sourceMappingURL=index.c769046f.js.map
